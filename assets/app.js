angular.module("app",[]);var app=angular.module("stockmeter",[]);app.controller("StockPriceCtrl",["$rootScope","$interval","$scope","StockSvc",function(e,o,t,n){t.getStockPriceUpdate=function(){n.fetch().success(function(e){t.conventory=e,console.log("inside StockPriceCtrl");var o="",c="",s="";for(var r in t.conventory)o+=t.conventory[r].stockName,o+=",";c=o.substring(0,o.length-1),s="https://api.iextrading.com/1.0/tops/last?symbols="+c,console.log(s),n.getStockPrice(s).then(function(e){console.log("Quotes retrieved good"),t.stockQuoteInventory=e.data},function(e){console.log(e),""==o&&(t.stockQuoteInventory="")})})},t.getStockPriceUpdate(),t.$on("autorefresh",function(e,o){console.log("Here comes code 1"),t.getStockPriceUpdate()})}]),app.controller("StockPriceDropDown",["$scope","$rootScope","StockSvc",function(e,o,t){console.log("inside controller");t.fetch().success(function(o){e.inventory=o}),e.addStockItem=function(){console.log("insiden addStockItem"),console.log(e),e.sName&&t.create({stockName:e.sName.symbol}).success(function(o){e.inventory.unshift(o),e.sName=null}),t.fetch(),e.parentData=1,console.log("inside broadcast event"),e.$broadcast("autorefresh",e.parentData)},e.removeStockItem=function(o){console.log("Deleting now"+o),console.log(o),o&&t.removeByStockName(o).success(function(n){console.log("Success:: Deleted Stock"+o),console.log(e.inventory),t.fetch().success(function(o){e.inventory=o}),e.parentData=2,e.$broadcast("autorefresh",e.parentData)})},t.getStockPrice("https://api.iextrading.com/1.0/tops/").then(function(o){console.log("Quotes retrieved good for DropDown"),e.stockdatadd=o.data},function(e){console.log(e)})}]),app.service("StockSvc",["$http",function(e){this.fetch=function(){return e.get("/api/stocks")},this.create=function(o){return e.post("/api/stocks/",o)},this.getStockPrice=function(o){return e.get(o)},this.removeByStockName=function(o){return console.log("inside service"+o),console.log(o),e.delete("/api/stocks/stockName/"+o)}}]);var Stock=require("../../models/Stock"),router=require("express").Router();router.get("/",function(e,o,t){console.log("inside router get"),Stock.find().sort({date:-1}).exec(function(e,n){if(e)return t(e);o.json(n)})}),router.post("/",function(e,o,t){console.log("inside router post"),console.log(e.body),new Stock({stockName:e.body.stockName}).save(function(e,n){if(e)return console.log(e.name),t(e);o.json(201,n)})}),router.delete("/",function(e,o,t){console.log("inside router delete"),console.log(e);new Stock({stockName:e.body.stockName})}),router.delete("/stockName/:id",function(e,o,t){console.log("inside router delete with stockName"),Stock.remove({stockName:e.params.id},function(e,t){e&&o.send(e),o.json({message:"Successfully deleted"})})}),module.exports=router;var express=require("express"),router=express.Router();router.get("/",function(e,o){o.sendfile("layouts/home.html")}),router.use(express.static(__dirname+"/../assets")),module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInN0b2Nrcy5jdHJsLmpzIiwic3RvY2tzLnN2Yy5qcyIsImFwaS9TdG9ja3MuanMiLCJzdGF0aWMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImFwcCIsImNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiJGludGVydmFsIiwiJHNjb3BlIiwiU3RvY2tTdmMiLCJnZXRTdG9ja1ByaWNlVXBkYXRlIiwiZmV0Y2giLCJzdWNjZXNzIiwic3RvY2tzIiwiY29udmVudG9yeSIsImNvbnNvbGUiLCJsb2ciLCJxdW90ZXMiLCJyZXFRdW90ZXMiLCJyZXFGaW5hbCIsIm9iaiIsInN0b2NrTmFtZSIsInN1YnN0cmluZyIsImxlbmd0aCIsImdldFN0b2NrUHJpY2UiLCJ0aGVuIiwicmVzcG9uc2UiLCJzdG9ja1F1b3RlSW52ZW50b3J5IiwiZGF0YSIsImVycm9yIiwiJG9uIiwiZXZlbnQiLCJpbnZlbnRvcnkiLCJhZGRTdG9ja0l0ZW0iLCJzTmFtZSIsImNyZWF0ZSIsInN5bWJvbCIsInBvc3QiLCJ1bnNoaWZ0IiwicGFyZW50RGF0YSIsIiRicm9hZGNhc3QiLCJyZW1vdmVTdG9ja0l0ZW0iLCJzdG9ja1RvUmVtb3ZlIiwicmVtb3ZlQnlTdG9ja05hbWUiLCJzdG9ja2RhdGFkZCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCJyZXF1ZXN0U3RyaW5nIiwiaWQiLCJkZWxldGUiLCJTdG9jayIsInJlcXVpcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZmluZCIsInNvcnQiLCJkYXRlIiwiZXhlYyIsImVyciIsInN0b2NrIiwianNvbiIsImJvZHkiLCJzYXZlIiwibmFtZSIsInJlbW92ZSIsInBhcmFtcyIsInNlbmQiLCJtZXNzYWdlIiwiZXhwb3J0cyIsImV4cHJlc3MiLCJzZW5kZmlsZSIsInVzZSIsInN0YXRpYyIsIl9fZGlybmFtZSJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsU0NP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QU4sR0FBQVEsS0FBQUQsT0FLQVYsT0FBQWpCLEtBQUEsSUFBQSxTQUFBbUIsRUFBQUMsRUFBQUMsR0FDQTNDLFFBQUFDLElBQUEsc0JBQ0FELFFBQUFDLElBQUF3QyxFQUFBVSxNQUNBLEdBQUFkLFFBQ0EvQixVQUFBbUMsRUFBQVUsS0FBQTdDLFlBR0E4QyxLQUFBLFNBQUFKLEVBQUFDLEdBQ0EsR0FBQUQsRUFFQSxNQURBaEQsU0FBQUMsSUFBQStDLEVBQUFLLE1BQ0FWLEVBQUFLLEVBQ0FOLEdBQUFRLEtBQUEsSUFBQUQsT0FNQVYsT0FBQUgsT0FBQSxJQUFBLFNBQUFLLEVBQUFDLEVBQUFDLEdBRUEzQyxRQUFBQyxJQUFBLHdCQUNBRCxRQUFBQyxJQUFBd0MsRUFDQSxJQUFBSixRQUNBL0IsVUFBQW1DLEVBQUFVLEtBQUE3QyxjQWFBaUMsT0FBQUgsT0FBQSxpQkFBQSxTQUFBSyxFQUFBQyxFQUFBQyxHQUVBM0MsUUFBQUMsSUFBQSx1Q0FFQW9DLE1BQUFpQixRQUNBaEQsVUFBQW1DLEVBQUFjLE9BQUFwQixJQUNBLFNBQUFhLEVBQUFDLEdBQ0FELEdBQ0FOLEVBQUFjLEtBQUFSLEdBQ0FOLEVBQUFRLE1BQUFPLFFBQUEsNkJBTUFyRSxPQUFBc0UsUUFBQW5CLE1DbkVBLElBQUFvQixTQUFBckIsUUFBQSxXQUNBQyxPQUFBb0IsUUFBQW5CLFFBRUFELFFBQUFOLElBQUEsSUFBQSxTQUFBUSxFQUFBQyxHQUNBQSxFQUFBa0IsU0FBQSx1QkFHQXJCLE9BQUFzQixJQUFBRixRQUFBRyxPQUFBQyxVQUFBLGVBRUEzRSxPQUFBc0UsUUFBQW5CIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXSlcbiIsIi8qXG5UaGlzIGZpbGUgY29udGFpbnMgYWxsIHRoZSBjb250cm9sbGVycy5cbkNvbnRyb2xsZXJzIGluIHR1cm4gY2FsbCB0aGUgc2VydmljZXMgdG8gYWNjZXNzLGRlbGV0ZSBvciBtb2RpZnkgdGhlc3RvY2sgcHJpY2VzXG5pbiB0aGUgZGF0YWJhc2UuT25jZSB0aGUgc3VjY2Vzcy9lcnJvciBmcm9tIERCIGlzIHJlY2lldmVkIGJhY2sgdGhlIG1vZGVsXG5pcyB1cGRhdGVkIGFuZCBhbmQgdGhlc2UgY2hhbmdlcyBnZXRzIHJlZmxlY3RlZCBpbiB0aGUgaG9tZXBhZ2UuXG4qL1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3N0b2NrbWV0ZXInLCBbXSlcblxuXG4vKlxuQGZ1bmN0aW9uOlxuICAgIDEuR2V0cyB0aGUgaW50aWFsIGN1cnJlbnQgc3RvY2sgcHJpY2UgZnJvbSB0aGUgaWV4IHdlIHNlcnZpY2VzIGNhbGxcbiAgICAyLiBVcGRhdGVzIHRoZSBjdXJyZW50IHN0b2NrIHByaWNlL3N5bWJvbHMgd2l0aCBldmVyeSBhZGRpdGlvbiBhbmQgcmVtb3ZhbCBvZiBuZXcgc3RvY2sgZW50cnkvcmVtb2N2YWwuXG4qL1xuXG5hcHAuY29udHJvbGxlcignU3RvY2tQcmljZUN0cmwnLGZ1bmN0aW9uKCRyb290U2NvcGUsJGludGVydmFsLCRzY29wZSxTdG9ja1N2Yyl7XG4kc2NvcGUuZ2V0U3RvY2tQcmljZVVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gIFN0b2NrU3ZjLmZldGNoKCkuXG4gIHN1Y2Nlc3MoZnVuY3Rpb24oc3RvY2tzKXtcbiAgICAkc2NvcGUuY29udmVudG9yeT1zdG9ja3M7XG4gICAgY29uc29sZS5sb2coXCJpbnNpZGUgU3RvY2tQcmljZUN0cmxcIilcbiAgdmFyIHF1b3Rlcz0nJztcbiAgdmFyIHJlcVF1b3Rlcz0nJzsvLz0nQUFQTCxHT09HJztcbiAgdmFyIHJlcUZpbmFsPScnO1xuICB2YXIgcmVxUHJlZml4PSdodHRwczovL2FwaS5pZXh0cmFkaW5nLmNvbS8xLjAvdG9wcy9sYXN0P3N5bWJvbHM9JztcbiAgZm9yKHZhciBvYmogaW4gJHNjb3BlLmNvbnZlbnRvcnkpe1xuICAgIHF1b3Rlcz1xdW90ZXMrJHNjb3BlLmNvbnZlbnRvcnlbb2JqXS5zdG9ja05hbWU7XG4gICAgcXVvdGVzPXF1b3RlcysnLCc7XG4gIH1cblxuICByZXFRdW90ZXM9cXVvdGVzLnN1YnN0cmluZygwLHF1b3Rlcy5sZW5ndGgtMSk7XG4gIHJlcUZpbmFsPXJlcVByZWZpeCtyZXFRdW90ZXM7XG4gIGNvbnNvbGUubG9nKHJlcUZpbmFsKTtcblxuICBTdG9ja1N2Yy5nZXRTdG9ja1ByaWNlKHJlcUZpbmFsKS5cbiAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgIGNvbnNvbGUubG9nKCdRdW90ZXMgcmV0cmlldmVkIGdvb2QnKTtcbiAgICAgICAkc2NvcGUuc3RvY2tRdW90ZUludmVudG9yeSA9IHJlc3BvbnNlLmRhdGE7XG4gICB9LGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAvL0lmIG5vIHF1b3RlcyBpcyBzZW50IC0gZW1wdHlpbmcgdGhlIHN0b2NrIHByaWNlIGRpc3BsYXkuXG4gICAgIGlmKHF1b3Rlcz09XCJcIil7XG4gICAgICAgJHNjb3BlLnN0b2NrUXVvdGVJbnZlbnRvcnk9XCJcIjtcbiAgICAgfVxuICAgfSlcblxuICB9XG4pfVxuXG4kc2NvcGUuZ2V0U3RvY2tQcmljZVVwZGF0ZSgpO1xuLy9oYW5kbGluZyB0aGUgYXV0by11cGRhdGUgb2Ygc3RvY2stcHJpY2UgYWZ0ZXIgYWRkaXRpb24gb2YgZHJvcGRvd24gdmFsdWVcbiRzY29wZS4kb24oJ2F1dG9yZWZyZXNoJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcbiAgY29uc29sZS5sb2coXCJIZXJlIGNvbWVzIGNvZGUgMVwiKTtcbiAgJHNjb3BlLmdldFN0b2NrUHJpY2VVcGRhdGUoKTtcbn0pO1xuXG59KTtcblxuXG4vKlxuQGZ1bmN0aW9uOlxuICAgIDEuIFJldHVybnMgdGhlIGludGlhbCB2YWx1ZXMgZm9yIHRoZSBkcm9wIGRvd24gXCJBZGQgU3RvY2tcIlxuICAgIDIuIEFkZCB0aGUgdmFsdWVzIHRvIERCIGFuZCBtb2RlbCB3aGVuIGJ1dHRvbiBcIkFkZCBTdG9ja1wiIGlzIGNsaWNrZWQuXG4gICAgMy4gUmVtb3ZlcyB0aGUgc3RvY2sgZnJvbSBEQiBhbmQgbW9kZWwgd2hlbiBcIi1cIiBidXR0b24gZm9sbG93aW5nIHRoZSBzdG9jayBpcyBjbGlja2VkLlxuKi9cblxuYXBwLmNvbnRyb2xsZXIoJ1N0b2NrUHJpY2VEcm9wRG93bicsZnVuY3Rpb24oJHNjb3BlLCRyb290U2NvcGUsU3RvY2tTdmMpe1xuY29uc29sZS5sb2coXCJpbnNpZGUgY29udHJvbGxlclwiKVxuICB2YXIgZHJvcERvd25TeW1ib2xzPSdodHRwczovL2FwaS5pZXh0cmFkaW5nLmNvbS8xLjAvdG9wcy8nO1xuXG4gIFN0b2NrU3ZjLmZldGNoKCkuXG4gICBzdWNjZXNzKGZ1bmN0aW9uKHN0b2Nrcyl7XG4gICAgICRzY29wZS5pbnZlbnRvcnk9c3RvY2tzO1xuICAgfSlcblxuICAgJHNjb3BlLmFkZFN0b2NrSXRlbT0gZnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZygnaW5zaWRlbiBhZGRTdG9ja0l0ZW0nKTtcbiAgICBjb25zb2xlLmxvZygkc2NvcGUpO1xuICAgICAgICBpZigkc2NvcGUuc05hbWUpe1xuICAgICAgICAgIFN0b2NrU3ZjLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIHN0b2NrTmFtZTokc2NvcGUuc05hbWUuc3ltYm9sfSkuXG4gICAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmludmVudG9yeS51bnNoaWZ0KHBvc3QpXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNOYW1lPW51bGw7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgU3RvY2tTdmMuZmV0Y2goKTtcblxuICAkc2NvcGUucGFyZW50RGF0YT0xO1xuXG4vL2FkZGluZyBhbiBldmVudCB0byBhdXRvcmVmbGVjdCBhZGRpaXRvbiBvZiBzdG9ja1xuY29uc29sZS5sb2coXCJpbnNpZGUgYnJvYWRjYXN0IGV2ZW50XCIpO1xuJHNjb3BlLiRicm9hZGNhc3QoJ2F1dG9yZWZyZXNoJywgJHNjb3BlLnBhcmVudERhdGEpO1xufVxuXG4vL3JlbW92aW5nIGFuIEl0ZW0gZnJvbSBTdG9ja1xuJHNjb3BlLnJlbW92ZVN0b2NrSXRlbT0gZnVuY3Rpb24oc3RvY2tUb1JlbW92ZSl7XG4gY29uc29sZS5sb2coXCJEZWxldGluZyBub3dcIitzdG9ja1RvUmVtb3ZlKTtcbiBjb25zb2xlLmxvZyhzdG9ja1RvUmVtb3ZlKTtcbiBpZihzdG9ja1RvUmVtb3ZlKXtcbiAgIFN0b2NrU3ZjLnJlbW92ZUJ5U3RvY2tOYW1lKHN0b2NrVG9SZW1vdmUpLlxuICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCl7XG4gICAgICAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3M6OiBEZWxldGVkIFN0b2NrXCIrc3RvY2tUb1JlbW92ZSk7XG4gICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuaW52ZW50b3J5KTtcbiAgICAgICAgLy9icm9hZGNhc3QgdG8gYXV0b3JlZnJlc2ggdGhlIHJlbW92YWwgb2Ygc3RvY2tcbiAgICAgICAgU3RvY2tTdmMuZmV0Y2goKS5cbiAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24oc3RvY2tzKXtcbiAgICAgICAgICAgJHNjb3BlLmludmVudG9yeT1zdG9ja3M7XG4gICAgICAgICB9KVxuICAgICAgICAkc2NvcGUucGFyZW50RGF0YSA9IDJcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2F1dG9yZWZyZXNoJywgJHNjb3BlLnBhcmVudERhdGEpO1xuICAgICAgIH0pXG4gfVxufVxuXG5TdG9ja1N2Yy5nZXRTdG9ja1ByaWNlKGRyb3BEb3duU3ltYm9scykuXG4gICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICBjb25zb2xlLmxvZygnUXVvdGVzIHJldHJpZXZlZCBnb29kIGZvciBEcm9wRG93bicpO1xuICAgICAgICRzY29wZS5zdG9ja2RhdGFkZCA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgIH0sZnVuY3Rpb24oZXJyb3Ipe1xuICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICB9KVxuICB9XG5cbilcbiIsIlxuLypcblRoaXMgaXMgdGhlIFNlcnZpY2VzIGZpbGUuXG5BbGwgdGhlIGNvbnRyb2xsZXIgY2FsbHMgdG8gTW9uZ29EQiB0aHJvdWdoIEV4cHJlc3MgYXJlIG1hZGUgdXNpbmcgdGhlIHNlcnZpY2VzLlxuSFRUUCBmdW5jdGlvbiBjYWxscyBmcm9tIHRoaXMgZmlsZSBhcmUgbWFkZSB0byB0aGUgYXBwL3JvdXRlcy5qcyBhbmQgcmVzcG9uc2UgaXMgc2VudFxuYmFjayB0byB0aGUgbmcvc3RvY2suY3RybC5qc1xuKi9cblxuYXBwLnNlcnZpY2UoJ1N0b2NrU3ZjJyxmdW5jdGlvbigkaHR0cCl7XG4gIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RvY2tzJylcbiAgfVxuXG4gIHRoaXMuY3JlYXRlPWZ1bmN0aW9uKHBvc3Qpe1xuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3N0b2Nrcy8nLHBvc3QpXG4gIH1cblxuLy8gQWNjZXNzaW5nIFN0b2NrIFByaWNlIHRocm91Z2ggYSBzZXJ2aWNlXG4gIHRoaXMuZ2V0U3RvY2tQcmljZT1mdW5jdGlvbihyZXF1ZXN0U3RyaW5nKXtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KHJlcXVlc3RTdHJpbmcpXG4gIH1cbiAgLy90aGlzLmludmVudG9yeT0kaHR0cC5nZXQoJy9hcGkvc3RvY2tzJyk7XG5cblxuICB0aGlzLnJlbW92ZUJ5U3RvY2tOYW1lPWZ1bmN0aW9uKGlkKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHNlcnZpY2VcIitpZClcbiAgICAgIGNvbnNvbGUubG9nKGlkKTtcbiAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvc3RvY2tzL3N0b2NrTmFtZS8nK2lkKVxuICAgICAgfVxuICAgIH1cblxuICApXG5cblxuLy9zZXJ2aWNlIHRvIGFkZCBzeW1ib2wgZHJvcCBkb3duXG4vLyB1cmwgaHR0cHM6Ly9hcGkuaWV4dHJhZGluZy5jb20vMS4wL3RvcHMvXG4iLCJcbnZhciBTdG9jayA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9TdG9jaycpO1xudmFyIHJvdXRlcj1yZXF1aXJlKCdleHByZXNzJykuUm91dGVyKClcblxuXG5cbnJvdXRlci5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc29sZS5sb2coXCJpbnNpZGUgcm91dGVyIGdldFwiKTtcbiAgICBTdG9jay5maW5kKClcbiAgICAuc29ydCh7ZGF0ZTotMX0pXG4gICAgLmV4ZWMoZnVuY3Rpb24oZXJyLHN0b2NrKXtcbiAgICAgIGlmKGVycil7cmV0dXJuIG5leHQoZXJyKX1cbiAgICAgIHJlcy5qc29uKHN0b2NrKVxuICAgIH0pXG5cbn0pXG5cbnJvdXRlci5wb3N0KCcvJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgY29uc29sZS5sb2coXCJpbnNpZGUgcm91dGVyIHBvc3RcIik7XG4gICAgICBjb25zb2xlLmxvZyhyZXEuYm9keSk7IC8vZGVidWdcbiAgdmFyIHN0b2NrID0gICBuZXcgU3RvY2soe1xuICAgIHN0b2NrTmFtZTogcmVxLmJvZHkuc3RvY2tOYW1lXG4gIH0pXG5cbiAgc3RvY2suc2F2ZShmdW5jdGlvbiAoZXJyLCBzdG9jaykge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVyci5uYW1lKTtcbiAgICAgIHJldHVybiBuZXh0KGVycikgfVxuICAgIHJlcy5qc29uKDIwMSwgc3RvY2spXG4gIH0pXG5cbn0pXG5cblxucm91dGVyLmRlbGV0ZSgnLycsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICAgIC8vICBjb25zb2xlLmxvZyhyZXEpO1xuICAgICAgY29uc29sZS5sb2coXCJpbnNpZGUgcm91dGVyIGRlbGV0ZVwiKTsgLy9kZWJ1Z1xuICAgIGNvbnNvbGUubG9nKHJlcSlcbiAgdmFyIHN0b2NrID0gbmV3IFN0b2NrKHtcbiAgICBzdG9ja05hbWU6IHJlcS5ib2R5LnN0b2NrTmFtZVxuICB9KVxuICAvL2NvbnNvbGUubG9nKHJlcSk7XG5cblxuICAvKnN0b2NrLnNhdmUoZnVuY3Rpb24gKGVyciwgc3RvY2spIHtcbiAgICBpZiAoZXJyKSB7IHJldHVybiBuZXh0KGVycikgfVxuICAgIHJlcy5qc29uKDIwMSwgc3RvY2spXG4gIH0pKi9cblxuXG59KVxuXG5yb3V0ZXIuZGVsZXRlKCcvc3RvY2tOYW1lLzppZCcsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICAgIC8vICBjb25zb2xlLmxvZyhyZXEpO1xuICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHJvdXRlciBkZWxldGUgd2l0aCBzdG9ja05hbWVcIik7IC8vZGVidWdcblxuICAgICAgICAgIFN0b2NrLnJlbW92ZSh7XG4gICAgICAgICAgICAgIHN0b2NrTmFtZTogcmVxLnBhcmFtcy5pZFxuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVyciwgc3RvY2spIHtcbiAgICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKGVycik7XG4gICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBkZWxldGVkJyB9KTtcbiAgICAgICAgICB9KTtcbn0pXG5cblxuXG5tb2R1bGUuZXhwb3J0cz1yb3V0ZXJcbiIsInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG52YXIgcm91dGVyPWV4cHJlc3MuUm91dGVyKClcblxucm91dGVyLmdldCgnLycsZnVuY3Rpb24ocmVxLHJlcyl7XG4gIHJlcy5zZW5kZmlsZSgnbGF5b3V0cy9ob21lLmh0bWwnKVxufSlcblxucm91dGVyLnVzZShleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUrJy8uLi9hc3NldHMnKSlcblxubW9kdWxlLmV4cG9ydHM9cm91dGVyXG4iXX0=
